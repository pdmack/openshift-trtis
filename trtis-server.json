{
   "apiVersion":"v1",
   "items":[
      {
         "apiVersion":"v1",
         "kind":"Service",
         "metadata":{
            "labels":{
               "app":"inference-server"
            },
            "name":"inference-server",
            "namespace":"trtis"
         },
         "spec":{
            "ports":[
               {
                  "name":"http-inference-server",
                  "port":8000,
                  "targetPort":8000
               },
               {
                  "name":"grpc-inference-server",
                  "port":8001,
                  "targetPort":8001
               },
               {
                  "name":"metrics-inference-server",
                  "port":8002,
                  "targetPort":8002
               }
            ],
            "selector":{
               "app":"inference-server"
            }
         }
      },
      {
         "apiVersion":"route.openshift.io/v1",
         "kind":"Route",
         "metadata":{
            "labels":{
               "app":"inference-server"
            },
            "name":"inference-server",
            "namespace":"trtis"
         },
         "spec":{
            "host":"inference-server-trtis.router.default.svc.cluster.local",
            "port":{
               "targetPort":"http-inference-server"
            },
            "to":{
               "kind":"Service",
               "name":"inference-server",
               "weight":100
            },
            "wildcardPolicy":"None"
         }
      },
      {
         "apiVersion":"extensions/v1beta1",
         "kind":"Deployment",
         "metadata":{
            "labels":{
               "app":"inference-server"
            },
            "name":"inference-server-v1",
            "namespace":"trtis"
         },
         "spec":{
            "template":{
               "metadata":{
                  "labels":{
                     "app":"inference-server",
                     "version":"v1"
                  }
               },
               "spec":{
                  "containers":[
                     {
                        "args":[
                           "--model-store=/models"
                        ],
                        "command":[
                           "trtserver"
                        ],
                        "image":"nvcr.io/nvidia/tensorrtserver:19.01-py3",
                        "imagePullPolicy":"IfNotPresent",
                        "livenessProbe":{
                           "httpGet":{
                              "path":"/api/health/live",
                              "port":8000
                           },
                           "initialDelaySeconds":5,
                           "periodSeconds":5
                        },
                        "name":"inference-server",
                        "ports":[
                           {
                              "containerPort":8000
                           },
                           {
                              "containerPort":8001
                           },
                           {
                              "containerPort":8002
                           }
                        ],
                        "readinessProbe":{
                           "httpGet":{
                              "path":"/api/health/ready",
                              "port":8000
                           },
                           "initialDelaySeconds":5,
                           "periodSeconds":5
                        },
                        "resources":{
                           "limits":{
                              "nvidia.com/gpu":1
                           }
                        }
                     }
                  ],
                  "imagePullSecrets":[
                     {
                        "name":"ngc"
                     }
                  ]
               }
            }
         }
      }
   ],
   "kind":"List"
}
